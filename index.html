function updatePeriodDisplay() {
  const period = getPeriod(currentPeriodOffset);
  if (!period) return;

  const pane = document.getElementById('pane-period');
  const star = document.getElementById('star-current');
  const dateRange = `${formatDateShort(period.start)} - ${formatDateShort(period.end)}`;
  const isCurrent = currentPeriodOffset === 0;

  document.getElementById('period-dates').textContent = isCurrent ? `${dateRange} (CURRENT)` : dateRange;
  isCurrent ? (star.classList.add('active'), pane.classList.add('current')) 
            : (star.classList.remove('active'), pane.classList.remove('current'));

  // ────────────────────────────────────────────────
  // Income section
  // ────────────────────────────────────────────────
  const salary = window.salaries[period.key] || 0;
  const otherIncome = window.otherIncomes[period.key] || 0;
  const totalIncome = salary + otherIncome;

  document.getElementById('salary-input').value = salary || '';
  document.getElementById('other-income-input').value = otherIncome || '';

  document.getElementById('salary-display').textContent          = `$${salary.toFixed(0)}`;
  document.getElementById('other-income-display').textContent    = `$${otherIncome.toFixed(0)}`;
  document.getElementById('total-income-display').textContent    = `$${totalIncome.toFixed(0)}`;

  // ────────────────────────────────────────────────
  // Expenses & Savings
  // ────────────────────────────────────────────────
  const periodExpenses = window.transactions.filter(t => {
    const tDate = new Date(t.date);
    tDate.setHours(0, 0, 0, 0);
    return tDate >= period.start && tDate <= period.end;
  });

  const totalExpenses = periodExpenses.reduce((sum, t) => sum + t.amount, 0);

  const thisPeriodSavings = totalIncome - totalExpenses;
  const carryForward = calculateCarryForward(period.periodNum);
  const totalCumulativeSavings = carryForward + thisPeriodSavings;

  document.getElementById('expenses-display').textContent = `$${totalExpenses.toFixed(0)}`;

  const savingsEl = document.getElementById('savings-display');
  savingsEl.textContent = `$${thisPeriodSavings.toFixed(0)}`;
  savingsEl.className = 'summary-value ' + (thisPeriodSavings >= 0 ? 'positive' : 'negative');

  const carryEl = document.getElementById('carry-forward-display');
  carryEl.textContent = `$${carryForward.toFixed(0)}`;
  carryEl.className = 'summary-value info ' + (carryForward >= 0 ? 'positive' : 'negative');

  const totalSavEl = document.getElementById('total-savings-display');
  totalSavEl.textContent = `$${totalCumulativeSavings.toFixed(0)}`;
  totalSavEl.className = 'summary-value ' + (totalCumulativeSavings >= 0 ? 'positive' : 'negative');

  renderExpenses(periodExpenses);
}
