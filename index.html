<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Expense Tracker</title>

<link rel="apple-touch-icon" sizes="180x180" href="icon.jpg">
<link rel="icon" type="image/jpeg" href="icon.jpg">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#000000">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

/* --- KEEPING YOUR EXISTING CSS --- */
*{margin:0;padding:0;box-sizing:border-box}
.app-header{position:fixed;top:0;left:0;right:0;background:linear-gradient(135deg,rgba(10,10,10,.95) 0%,rgba(0,0,0,.98) 100%);backdrop-filter:blur(20px) saturate(180%);-webkit-backdrop-filter:blur(20px) saturate(180%);border-bottom:1px solid rgba(255,255,255,.1);padding:16px 20px;display:flex;align-items:center;justify-content:center;gap:16px;z-index:1001;box-shadow:0 4px 24px rgba(0,0,0,.5)}
.app-logo{font-size:2.5rem;animation:float 3s ease-in-out infinite;filter:drop-shadow(0 0 20px rgba(251,191,36,.4))}
.app-title{font-size:1.8rem;font-weight:800;background:linear-gradient(135deg,#fbbf24,#f59e0b,#fbbf24);background-size:200% 200%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-1px;animation:gradient-shift 3s ease infinite}
@keyframes gradient-shift{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:#000;background-image:radial-gradient(at 0% 0%,rgba(30,64,175,.15) 0px,transparent 50%),radial-gradient(at 100% 0%,rgba(139,92,246,.15) 0px,transparent 50%),radial-gradient(at 100% 100%,rgba(16,185,129,.1) 0px,transparent 50%);min-height:100vh;padding:100px 20px 80px 20px;display:flex;align-items:center;justify-content:center;color:#fff;position:relative;overflow-x:hidden}
body::before{content:'';position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,transparent 48%,rgba(255,255,255,.01) 50%,transparent 52%),linear-gradient(-45deg,transparent 48%,rgba(255,255,255,.01) 50%,transparent 52%);background-size:60px 60px;pointer-events:none;opacity:.3}
.container{max-width:1600px;width:100%;position:relative;z-index:1}

/* Sync Bar */
.sync-bar{margin-bottom: 32px; background:rgba(255,255,255,.03);backdrop-filter:blur(30px) saturate(180%);-webkit-backdrop-filter:blur(30px) saturate(180%);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:20px 28px;display:flex;gap:16px;justify-content:center;align-items:center;flex-wrap:wrap;box-shadow:0 8px 32px rgba(0,0,0,.3),inset 0 1px 0 rgba(255,255,255,.1);position:relative;overflow:hidden}
.sync-bar::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.05),transparent);animation:shimmer 3s infinite}
@keyframes shimmer{to{left:200%}}
.sync-btn{background:linear-gradient(135deg,rgba(255,255,255,.1),rgba(255,255,255,.05));border:1px solid rgba(255,255,255,.15);color:white;padding:12px 24px;border-radius:12px;cursor:pointer;font-size:.95rem;font-weight:600;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;gap:10px;position:relative;overflow:hidden;box-shadow:0 4px 16px rgba(0,0,0,.2)}
.sync-btn:hover{transform:translateY(-3px);box-shadow:0 8px 24px rgba(0,0,0,.3)}
.sync-btn.settings{background:linear-gradient(135deg,rgba(139,92,246,.25),rgba(139,92,246,.15));border-color:rgba(139,92,246,.4)}
.sync-btn.insights{background:linear-gradient(135deg,rgba(236,72,153,.25),rgba(236,72,153,.15));border-color:rgba(236,72,153,.4)}
.sync-btn.analytics{background:linear-gradient(135deg,rgba(251,191,36,.25),rgba(251,191,36,.15));border-color:rgba(251,191,36,.4)}
.sync-btn.export{background:linear-gradient(135deg,rgba(16,185,129,.25),rgba(16,185,129,.15));border-color:rgba(16,185,129,.4)}
.sync-btn.import{background:linear-gradient(135deg,rgba(99,102,241,.25),rgba(99,102,241,.15));border-color:rgba(99,102,241,.4)}
.sync-btn.danger{background:linear-gradient(135deg,rgba(239,68,68,.25),rgba(239,68,68,.15));border-color:rgba(239,68,68,.4)}

/* Pane Styling */
.pane{background:linear-gradient(135deg,rgba(30,30,30,.95) 0%,rgba(15,15,15,.98) 100%);backdrop-filter:blur(30px) saturate(180%);border:1px solid rgba(255,255,255,.1);border-radius:24px;padding:36px;box-shadow:0 24px 64px rgba(0,0,0,.5);position:relative;overflow:hidden;transition:all .4s}
.pane.current{border-color:rgba(251,191,36,.4)}
.pane.monthly{border-color:rgba(59,130,246,.4)}
.pane-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid rgba(255,255,255,.08)}

/* Inputs & Buttons */
.input-group{margin-bottom:16px}
.input-label{font-size:.75rem;color:rgba(255,255,255,.7);margin-bottom:8px;display:block;font-weight:600;text-transform:uppercase}
input,select{width:100%;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:12px 14px;color:#fff;font-size:.95rem}
.btn{width:100%;background:linear-gradient(135deg,#fff,#f0f0f0);color:#0a0a0a;border:none;border-radius:10px;padding:14px;font-weight:700;cursor:pointer;text-transform:uppercase}

/* Summary & Lists */
.summary{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:28px}
.summary-item{background:rgba(255,255,255,.05);padding:18px;border-radius:14px;text-align:center;border:1px solid rgba(255,255,255,.1)}
.summary-item.full-width{grid-column:1/-1}
.summary-value{font-size:1.6rem;font-weight:800;color:#fff}
.expenses-list{max-height:350px;overflow-y:auto;margin-top:20px}
.expense-item{background:rgba(255,255,255,.05);padding:14px 16px;border-radius:12px;display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;border:1px solid rgba(255,255,255,.08)}

/* Utility Specifics */
.month-nav{display:flex;gap:8px;align-items:center;justify-content:center;margin-bottom:16px}
.month-nav button{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);color:white;padding:8px 12px;border-radius:8px;cursor:pointer}
.pane-title{font-size:1.4rem;font-weight:700;color:#fff}

/* =========================================
   NEW SWIPE & LAYOUT LOGIC
   ========================================= */

/* Desktop Grid Layout (Default) */
#swipe-wrapper {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 32px;
    width: 100%;
}

/* Mobile Tabs (Hidden on Desktop) */
.mobile-tabs {
    display: none;
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(30, 30, 30, 0.9);
    backdrop-filter: blur(10px);
    padding: 8px;
    border-radius: 30px;
    border: 1px solid rgba(255,255,255,0.2);
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    z-index: 2000;
    gap: 10px;
}

.tab-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255,255,255,0.2);
    transition: all 0.3s ease;
    cursor: pointer;
}

.tab-dot.active {
    background: #fbbf24;
    transform: scale(1.2);
    box-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
}

.tab-dot.active-util {
    background: #3b82f6;
    box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
}

/* Mobile Swipe Layout */
@media (max-width: 1000px) {
    body {
        padding: 80px 10px 80px 10px;
        overflow-x: hidden;
    }
    
    .container {
        overflow: hidden; /* Hide the pane that is off-screen */
    }

    #swipe-wrapper {
        display: flex; /* Switch from Grid to Flex */
        width: 200%; /* Make room for 2 panes */
        gap: 0;
        transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Smooth slide animation */
    }

    .pane {
        width: 50%; /* Each pane takes half the wrapper (which is 1 screen width) */
        flex-shrink: 0;
        border-radius: 20px;
        transform: scale(0.95); /* Slight shrink for card effect */
        opacity: 0.5;
        transition: opacity 0.3s, transform 0.3s;
        height: auto;
        min-height: 70vh; /* Ensure full height feel */
    }

    .pane.active-pane {
        opacity: 1;
        transform: scale(1);
    }

    .mobile-tabs {
        display: flex; /* Show tabs on mobile */
    }
    
    /* Adjust internal padding for mobile */
    .summary { grid-template-columns: 1fr; }
    .app-title { font-size: 1.4rem; }
    .sync-bar { display: none; } /* Optional: Hide big buttons on mobile or move to menu */
}
</style>
</head>
<body>

<div class="app-header">
    <div class="app-logo">üí∞</div>
    <h1 class="app-title">Expense Tracker</h1>
</div>

<div class="container">
    
    <div class="sync-bar">
        <button class="sync-btn settings" onclick="showSettings()">‚öôÔ∏è Settings</button>
        <button class="sync-btn insights" onclick="showInsights()">üìà Insights</button>
        <button class="sync-btn analytics" onclick="showAnalytics()">üìä Analytics</button>
        <button class="sync-btn export" onclick="exportData()">üì• Export</button>
        <button class="sync-btn import" onclick="document.getElementById('import-file').click()">üì§ Import</button>
        <button class="sync-btn danger" onclick="resetApp()">üîÑ Reset</button>
        <input type="file" id="import-file" accept=".json" style="display:none" onchange="importData(event)">
    </div>

    <div id="swipe-wrapper">
        
        <div class="pane current active-pane" id="pane-period">
            <div class="pane-header">
                <div class="period-nav">
                    <button onclick="changePeriod(-1)">‚óÄ</button>
                    <div class="period-title" id="period-dates">Current Period</div>
                    <button onclick="changePeriod(1)">‚ñ∂</button>
                </div>
                <div class="star-toggle" id="star-current" onclick="jumpToCurrent()">‚≠ê</div>
            </div>

            <div class="summary">
                <div class="summary-item"><div class="summary-label">Salary</div><div class="summary-value" id="salary-display">$0</div></div>
                <div class="summary-item"><div class="summary-label">Expenses</div><div class="summary-value" id="expenses-display">$0</div></div>
                <div class="summary-item"><div class="summary-label">Savings</div><div class="summary-value" id="savings-display">$0</div></div>
                <div class="summary-item full-width"><div class="summary-label">Total Savings</div><div class="summary-value" id="total-savings-display">$0</div></div>
            </div>

            <div class="input-group"><label class="input-label">Salary</label><input type="number" id="salary-input" placeholder="Enter salary" step="0.01"></div>
            <div class="input-group"><label class="input-label">Category</label><input type="text" id="category-input" placeholder="e.g., Groceries"></div>
            <div class="input-group"><label class="input-label">Amount</label><input type="number" id="amount-input" placeholder="0.00" step="0.01"></div>
            <button class="btn" onclick="addExpense()">Add Expense</button>

            <div class="expenses-list" id="expenses-list">
                <div class="empty-state">
                    <div class="empty-state-icon">üìä</div>
                    <div>No expenses yet</div>
                </div>
            </div>
        </div>

        <div class="pane monthly">
            <div class="pane-header"><div class="pane-title">Monthly Utilities</div></div>
            
            <div class="month-nav">
                <button onclick="changeMonth(-1)">‚óÄ</button>
                <div class="month-display" id="month-display">January 2026</div>
                <button onclick="changeMonth(1)">‚ñ∂</button>
            </div>

            <div id="utility-disclaimer" style="background:rgba(139,92,246,0.1);border:1px solid rgba(139,92,246,0.3);border-radius:12px;padding:16px;margin:16px 0 20px 0;">
                <div style="font-weight:700;color:#8b5cf6;font-size:0.9rem;">üìå Tracking Only</div>
                <p style="font-size:0.8rem;color:rgba(255,255,255,0.7);margin-top:5px;">Not included in daily expense budget.</p>
            </div>

            <div class="summary">
                <div class="summary-item full-width"><div class="summary-label">Total Bills</div><div class="summary-value" id="monthly-total">$0</div></div>
            </div>

            <div class="input-group">
                <label class="input-label">Utility Type</label>
                <select id="utility-type">
                    <option value="">Select utility...</option>
                    <option value="üíß Water">üíß Water</option>
                    <option value="üî• Gas">üî• Gas</option>
                    <option value="‚ö° Hydro">‚ö° Hydro</option>
                    <option value="üì° Internet">üì° Internet</option>
                    <option value="üì± Phone">üì± Phone</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            
            <div class="input-group">
                <label class="input-label">Amount</label>
                <input type="number" id="utility-amount" placeholder="0.00" step="0.01">
            </div>
            
            <button class="btn" onclick="addUtility()">Add Utility</button>

            <div class="expenses-list" id="utility-list">
                </div>
        </div>

    </div> </div>

<div class="mobile-tabs">
    <div class="tab-dot active" onclick="switchTab(0)"></div>
    <div class="tab-dot" onclick="switchTab(1)"></div>
</div>

<script>
    /* NOTE: Preserve your existing expense logic/functions (addExpense, etc.)
       This script ONLY handles the Swipe UI.
    */

    const wrapper = document.getElementById('swipe-wrapper');
    const panes = document.querySelectorAll('.pane');
    const dots = document.querySelectorAll('.tab-dot');
    let currentIndex = 0; // 0 = Expenses, 1 = Utilities
    let startX = 0;
    let currentTranslate = 0;
    let prevTranslate = 0;
    let isDragging = false;
    let animationID;

    // --- SWIPE EVENTS ---
    
    // Prevent default touch actions only on horizontal swipes to allow scrolling
    wrapper.addEventListener('touchstart', touchStart);
    wrapper.addEventListener('touchend', touchEnd);
    wrapper.addEventListener('touchmove', touchMove);

    function touchStart(index) {
        return function(event) {
            // Don't trigger swipe if touching an input range or button
            if(event.target.tagName === 'INPUT' && event.target.type === 'range') return;
            
            startX = event.touches[0].clientX;
            isDragging = true;
            animationID = requestAnimationFrame(animation);
            wrapper.style.cursor = 'grabbing';
        }
    }

    function touchMove(event) {
        if (isDragging) {
            const currentX = event.touches[0].clientX;
            const diff = currentX - startX;
            // Only block vertical scrolling if the horizontal swipe is significant
            if(Math.abs(diff) > 5) {
                // optional: event.preventDefault(); 
            }
            currentTranslate = prevTranslate + diff;
        }
    }

    function touchEnd() {
        isDragging = false;
        cancelAnimationFrame(animationID);
        const movedBy = currentTranslate - prevTranslate;

        // If moved more than 100px, snap to next pane
        if (movedBy < -70 && currentIndex < 1) currentIndex += 1;
        if (movedBy > 70 && currentIndex > 0) currentIndex -= 1;

        setPositionByIndex();
        wrapper.style.cursor = 'grab';
    }

    function animation() {
        if(isDragging) {
            setSliderPosition();
            requestAnimationFrame(animation);
        }
    }

    function setSliderPosition() {
        // Limit the drag so you can't pull too far off screen
        if(currentTranslate > 50) currentTranslate = 50; 
        if(currentTranslate < -window.innerWidth - 50) currentTranslate = -window.innerWidth - 50;
        wrapper.style.transform = `translateX(${currentTranslate}px)`;
    }

    function setPositionByIndex() {
        currentTranslate = currentIndex * -window.innerWidth;
        if(window.innerWidth > 1000) currentTranslate = 0; // Reset on desktop
        prevTranslate = currentTranslate;
        
        wrapper.style.transform = `translateX(${currentTranslate}px)`;
        
        // Update Active Classes
        panes.forEach((pane, index) => {
            if(index === currentIndex) pane.classList.add('active-pane');
            else pane.classList.remove('active-pane');
        });

        // Update Dots
        dots.forEach((dot, index) => {
            dot.classList.remove('active', 'active-util');
            if(index === currentIndex) {
                if(index === 0) dot.classList.add('active'); // Gold for Expenses
                else dot.classList.add('active-util'); // Blue for Utilities
            }
        });
    }

    // Function for clicking the dots
    function switchTab(index) {
        currentIndex = index;
        setPositionByIndex();
    }

    // Initialize Listeners
    // We attach the start listener to the wrapper
    wrapper.addEventListener('touchstart', touchStart(currentIndex));
    
    // Handle Window Resize (Reset to grid if desktop)
    window.addEventListener('resize', () => {
        if(window.innerWidth > 1000) {
            wrapper.style.transform = 'none';
        } else {
            setPositionByIndex();
        }
    });

</script>

<script>
    // Paste your existing app logic (addExpense, data handling) here.
    // For now, these are placeholders so buttons don't throw errors.
    function addExpense() { alert("Add Expense Logic"); }
    function addUtility() { alert("Add Utility Logic"); }
    function changePeriod(d) { console.log("Change Period"); }
    function changeMonth(d) { console.log("Change Month"); }
</script>

</body>
</html>
